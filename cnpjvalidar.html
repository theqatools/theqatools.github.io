<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>The QA Tools - Demo site</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/reset.css" />
        <link rel="stylesheet" href="css/base.css">
        <link rel="stylesheet" href="css/header.css">
        <link rel="stylesheet" href="css/cnpjValidar.css">
        <link rel="stylesheet" href="css/footer.css">
        <script type="module">
            import {cnpjIsValid} from "./js/cnpj_utils.js";

            function setDisplay(id, value) {
                document.getElementById(id).style.display = value;
            }

            function setValid() {
                setDisplay("valid-text", "block");
                setDisplay("invalid-text", "none");
            }

            function setInvalid() {
                setDisplay("valid-text", "none");
                setDisplay("invalid-text", "block");
            }

            function validateCnpj(e) {
                setDisplay("valid-text", "none");
                setDisplay("invalid-text", "none");

                let cnpj = e.target.value;
                if(!cnpj)
                    return;

                if (cnpj.length === 14 && cnpjIsValid(cnpj)) {
                    setValid();
                } else {
                    setInvalid();
                }
            }

            function addhandler(event) {
                document.getElementById("cnpj").addEventListener(event, validateCnpj);
            }

            addhandler("paste");
            addhandler("blur");
            addhandler("keyup");
            addhandler("input");
        </script>
    </head>
    <body onresize="onResize()">
        <header>
            <div class="flex-grid">
                <div class="menu-hamburguer">
                    <input id="menu-hamburguer" type="checkbox" onclick="showMenu()">
                    <label for="menu-hamburguer">
                        <div class="menu">
                            <span class="hamburguer"></span>
                        </div>
                    </label>
                </div>
                <div class="title grid-6">
                    <h1><a href="index.html">The QA Tools - Demo site</a></h1>
                </div>
                <nav class="grid-10" id="menuNav">
                    <div class="tool-options grid-3">
                        <h2>CNPJ</h2>
                        <ul>
                            <li><a href="cnpjgerar.html">Gerar</a></li>
                            <li><a href="cnpjvalidar.html">Validar</a></li>
                        </ul>
                    </div>
                    <div class="tool-options grid-3">
                        <h2>Chave NFe</h2>
                        <ul>
                            <li><a href="nfegerar.html">Gerar</a></li>
                            <li><a href="nfevalidar.html">Validar</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
        <main class="grid-flex">
            <div class="grid-16 input-data lg">
                <input maxlength="14" minlength="14" size="15" class="big-input-text cnpj-text" type="text" id="cnpj" placeholder="Digite o CNPJ" />
            </div>
            <span id="valid-text" class="grid-16 valid-text">CNPJ válido</span>
            <span id="invalid-text" class="grid-16 invalid-text">CNPJ inválido</span>
        </main>
        <footer>
            <p>&copy; The QA Tools - <a href="desenvolvedores.html">Desenvolvedores</a></p>
        </footer>
        <script src="js/script.js"></script>
        <script src="js/dark_mode.js"></script>
    </body>
</html>
